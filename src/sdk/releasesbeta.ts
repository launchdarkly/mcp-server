/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { releasesBetaCreateReleaseForFlag } from "../funcs/releasesBetaCreateReleaseForFlag.js";
import { releasesBetaDeleteReleaseByFlagKey } from "../funcs/releasesBetaDeleteReleaseByFlagKey.js";
import { releasesBetaGetReleaseByFlagKey } from "../funcs/releasesBetaGetReleaseByFlagKey.js";
import { releasesBetaPatchReleaseByFlagKey } from "../funcs/releasesBetaPatchReleaseByFlagKey.js";
import { releasesBetaUpdatePhaseStatus } from "../funcs/releasesBetaUpdatePhaseStatus.js";
import { ClientSDK, RequestOptions } from "../lib/sdks.js";
import * as models from "../models/index.js";
import * as operations from "../models/operations/index.js";
import { unwrapAsync } from "../types/fp.js";

export class ReleasesBeta extends ClientSDK {
  /**
   * Get release for flag
   *
   * @remarks
   * Get currently active release for a flag
   */
  async getReleaseByFlagKey(
    request: operations.GetReleaseByFlagKeyRequest,
    options?: RequestOptions,
  ): Promise<models.Release> {
    return unwrapAsync(releasesBetaGetReleaseByFlagKey(
      this,
      request,
      options,
    ));
  }

  /**
   * Delete a release for flag
   *
   * @remarks
   * Deletes a release from a flag
   */
  async deleteReleaseByFlagKey(
    request: operations.DeleteReleaseByFlagKeyRequest,
    options?: RequestOptions,
  ): Promise<void> {
    return unwrapAsync(releasesBetaDeleteReleaseByFlagKey(
      this,
      request,
      options,
    ));
  }

  /**
   * Patch release for flag
   *
   * @remarks
   * This endpoint is only available for releases that are part of a legacy release pipeline. Releases for new release pipelines should use the [Update phase status for release](https://launchdarkly.com/docs/api/releases-beta/update-phase-status) endpoint. To learn more about migrating from legacy release pipelines to fully automated release pipelines, read the [Release pipeline migration guide](https://launchdarkly.com/docs/guides/flags/release-pipeline-migration).
   *
   * Update currently active release for a flag. Updating releases requires the [JSON patch](https://datatracker.ietf.org/doc/html/rfc6902) format. To learn more, read [Updates](https://launchdarkly.com/docs/api#updates).
   *
   * You can only use this endpoint to mark a release phase complete or incomplete. To indicate which phase to update, use the array index in the `path`. For example, to mark the first phase of a release as complete, use the following request body:
   *
   * ```
   *   [
   *     {
   *       "op": "replace",
   *       "path": "/phase/0/complete",
   *       "value": true
   *     }
   *   ]
   * ```
   */
  async patchReleaseByFlagKey(
    request: operations.PatchReleaseByFlagKeyRequest,
    options?: RequestOptions,
  ): Promise<models.Release> {
    return unwrapAsync(releasesBetaPatchReleaseByFlagKey(
      this,
      request,
      options,
    ));
  }

  /**
   * Create a new release for flag
   *
   * @remarks
   * Creates a release by adding a flag to a release pipeline
   */
  async createReleaseForFlag(
    request: operations.CreateReleaseForFlagRequest,
    options?: RequestOptions,
  ): Promise<models.Release> {
    return unwrapAsync(releasesBetaCreateReleaseForFlag(
      this,
      request,
      options,
    ));
  }

  /**
   * Update phase status for release
   *
   * @remarks
   * Updates the execution status of a phase of a release
   */
  async updatePhaseStatus(
    request: operations.UpdatePhaseStatusRequest,
    options?: RequestOptions,
  ): Promise<models.Release> {
    return unwrapAsync(releasesBetaUpdatePhaseStatus(
      this,
      request,
      options,
    ));
  }
}
