/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { codeReferencesCreateExtinctionEvent } from "../funcs/codeReferencesCreateExtinctionEvent.js";
import { codeReferencesCreateRepository } from "../funcs/codeReferencesCreateRepository.js";
import { codeReferencesDeleteBranches } from "../funcs/codeReferencesDeleteBranches.js";
import { codeReferencesDeleteRepository } from "../funcs/codeReferencesDeleteRepository.js";
import { codeReferencesGet } from "../funcs/codeReferencesGet.js";
import { codeReferencesGetBranch } from "../funcs/codeReferencesGetBranch.js";
import { codeReferencesGetBranches } from "../funcs/codeReferencesGetBranches.js";
import { codeReferencesGetLinks } from "../funcs/codeReferencesGetLinks.js";
import { codeReferencesGetStatistics } from "../funcs/codeReferencesGetStatistics.js";
import { codeReferencesListRepositories } from "../funcs/codeReferencesListRepositories.js";
import { codeReferencesPutBranch } from "../funcs/codeReferencesPutBranch.js";
import { codeReferencesUpdate } from "../funcs/codeReferencesUpdate.js";
import { ClientSDK, RequestOptions } from "../lib/sdks.js";
import * as components from "../models/components/index.js";
import * as operations from "../models/operations/index.js";
import { unwrapAsync } from "../types/fp.js";

export class CodeReferences2 extends ClientSDK {
  /**
   * List repositories
   *
   * @remarks
   * Get a list of connected repositories. Optionally, you can include branch metadata with the `withBranches` query parameter. Embed references for the default branch with `ReferencesForDefaultBranch`. You can also filter the list of code references by project key and flag key.
   */
  async listRepositories(
    request: operations.GetRepositoriesRequest,
    options?: RequestOptions,
  ): Promise<components.RepositoryCollectionRep> {
    return unwrapAsync(codeReferencesListRepositories(
      this,
      request,
      options,
    ));
  }

  /**
   * Create repository
   *
   * @remarks
   * Create a repository with the specified name.
   */
  async createRepository(
    request: components.RepositoryPost,
    options?: RequestOptions,
  ): Promise<components.RepositoryRep> {
    return unwrapAsync(codeReferencesCreateRepository(
      this,
      request,
      options,
    ));
  }

  /**
   * Get repository
   *
   * @remarks
   * Get a single repository by name.
   */
  async get(
    request: operations.GetRepositoryRequest,
    options?: RequestOptions,
  ): Promise<components.RepositoryRep> {
    return unwrapAsync(codeReferencesGet(
      this,
      request,
      options,
    ));
  }

  /**
   * Update repository
   *
   * @remarks
   * Update a repository's settings. Updating repository settings uses a [JSON patch](https://datatracker.ietf.org/doc/html/rfc6902) or [JSON merge patch](https://datatracker.ietf.org/doc/html/rfc7386) representation of the desired changes. To learn more, read [Updates](https://launchdarkly.com/docs/api#updates).
   */
  async update(
    request: operations.PatchRepositoryRequest,
    options?: RequestOptions,
  ): Promise<components.RepositoryRep> {
    return unwrapAsync(codeReferencesUpdate(
      this,
      request,
      options,
    ));
  }

  /**
   * Delete repository
   *
   * @remarks
   * Delete a repository with the specified name.
   */
  async deleteRepository(
    request: operations.DeleteRepositoryRequest,
    options?: RequestOptions,
  ): Promise<void> {
    return unwrapAsync(codeReferencesDeleteRepository(
      this,
      request,
      options,
    ));
  }

  /**
   * Delete branches
   *
   * @remarks
   * Asynchronously delete a number of branches.
   */
  async deleteBranches(
    request: operations.DeleteBranchesRequest,
    options?: RequestOptions,
  ): Promise<void> {
    return unwrapAsync(codeReferencesDeleteBranches(
      this,
      request,
      options,
    ));
  }

  /**
   * List branches
   *
   * @remarks
   * Get a list of branches.
   */
  async getBranches(
    request: operations.GetBranchesRequest,
    options?: RequestOptions,
  ): Promise<components.BranchCollectionRep> {
    return unwrapAsync(codeReferencesGetBranches(
      this,
      request,
      options,
    ));
  }

  /**
   * Get branch
   *
   * @remarks
   * Get a specific branch in a repository.
   */
  async getBranch(
    request: operations.GetBranchRequest,
    options?: RequestOptions,
  ): Promise<components.BranchRep> {
    return unwrapAsync(codeReferencesGetBranch(
      this,
      request,
      options,
    ));
  }

  /**
   * Upsert branch
   *
   * @remarks
   * Create a new branch if it doesn't exist, or update the branch if it already exists.
   */
  async putBranch(
    request: operations.PutBranchRequest,
    options?: RequestOptions,
  ): Promise<void> {
    return unwrapAsync(codeReferencesPutBranch(
      this,
      request,
      options,
    ));
  }

  /**
   * Create extinction
   *
   * @remarks
   * Create a new extinction.
   */
  async createExtinctionEvent(
    request: operations.PostExtinctionRequest,
    options?: RequestOptions,
  ): Promise<void> {
    return unwrapAsync(codeReferencesCreateExtinctionEvent(
      this,
      request,
      options,
    ));
  }

  /**
   * Get links to code reference repositories for each project
   *
   * @remarks
   * Get links for all projects that have code references.
   */
  async getLinks(
    options?: RequestOptions,
  ): Promise<components.StatisticsRoot> {
    return unwrapAsync(codeReferencesGetLinks(
      this,
      options,
    ));
  }

  /**
   * Get code references statistics for flags
   *
   * @remarks
   * Get statistics about all the code references across repositories for all flags in your project that have code references in the default branch, for example, `main`. Optionally, you can include the `flagKey` query parameter to limit your request to statistics about code references for a single flag. This endpoint returns the number of references to your flag keys in your repositories, as well as a link to each repository.
   */
  async getStatistics(
    request: operations.GetStatisticsRequest,
    options?: RequestOptions,
  ): Promise<components.StatisticCollectionRep> {
    return unwrapAsync(codeReferencesGetStatistics(
      this,
      request,
      options,
    ));
  }
}
