/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { teamsPatchTeam } from "../../funcs/teamsPatchTeam.js";
import * as operations from "../../models/operations/index.js";
import { formatResult, ToolDefinition } from "../tools.js";

const args = {
  request: operations.PatchTeamRequest$inboundSchema,
};

export const tool$teamsPatchTeam: ToolDefinition<typeof args> = {
  name: "teams-patch-team",
  description: `Update team

Perform a partial update to a team. Updating a team uses the semantic patch format.

To make a semantic patch request, you must append \`domain-model=launchdarkly.semanticpatch\` to your \`Content-Type\` header. To learn more, read [Updates using semantic patch](https://launchdarkly.com/docs/api#updates-using-semantic-patch).

### Instructions

Semantic patch requests support the following \`kind\` instructions for updating teams. Several of the instructions require one or more member IDs as parameters. The member ID is returned as part of the [List account members](https://launchdarkly.com/docs/ld-docs/api/account-members/get-members) response. It is the \`_id\` field of each element in the \`items\` array.


<details>
<summary>Click to expand instructions for <strong>updating teams</strong></summary>

#### addCustomRoles

Adds custom roles to the team. Team members will have these custom roles granted to them.

##### Parameters

- \`values\`: List of custom role keys.

Here's an example:

\`\`\`json
{
  "instructions": [{
    "kind": "addCustomRoles",
    "values": [ "example-custom-role" ]
  }]
}
\`\`\`

#### addMembers

Adds members to the team.

##### Parameters

- \`values\`: List of member IDs to add.

Here's an example:

\`\`\`json
{
  "instructions": [{
    "kind": "addMembers",
    "values": [ "1234a56b7c89d012345e678f", "507f1f77bcf86cd799439011" ]
  }]
}
\`\`\`

#### addPermissionGrants

Adds permission grants to members for the team. For example, a permission grant could allow a member to act as a team maintainer. A permission grant may have either an \`actionSet\` or a list of \`actions\` but not both at the same time. The members do not have to be team members to have a permission grant for the team.

##### Parameters

- \`actionSet\`: Name of the action set.
- \`actions\`: List of actions.
- \`memberIDs\`: List of member IDs.

Here's an example:

\`\`\`json
{
  "instructions": [{
    "kind": "addPermissionGrants",
    "actions": [ "updateTeamName", "updateTeamDescription" ],
    "memberIDs": [ "1234a56b7c89d012345e678f", "507f1f77bcf86cd799439011" ]
  }]
}
\`\`\`

#### addRoleAttribute

Adds a role attribute to a team. Team members will have these role attribute values scoped for all custom roles granted to them.

##### Parameters

- \`key\`: The role attribute key to add.
- \`values\`: List of role attribute values for that key.

Here's an example:

\`\`\`json
{
  "instructions": [
    {
      "kind": "addRoleAttribute",
      "key": "testAttribute",
      "values": ["someNewValue", "someOtherNewValue"]
    }
  ]
}
\`\`\`

#### removeCustomRoles

Removes custom roles from the team. The app will no longer grant these custom roles to the team members.

##### Parameters

- \`values\`: List of custom role keys.

Here's an example:

\`\`\`json
{
  "instructions": [{
    "kind": "removeCustomRoles",
    "values": [ "example-custom-role" ]
  }]
}
\`\`\`

#### removeMembers

Removes members from the team.

##### Parameters

- \`values\`: List of member IDs to remove.

Here's an example:

\`\`\`json
{
  "instructions": [{
    "kind": "removeMembers",
    "values": [ "1234a56b7c89d012345e678f", "507f1f77bcf86cd799439011" ]
  }]
}
\`\`\`

#### removePermissionGrants

Removes permission grants from members for the team. A permission grant may have either an \`actionSet\` or a list of \`actions\` but not both at the same time. The \`actionSet\` and \`actions\` must match an existing permission grant.

##### Parameters

- \`actionSet\`: Name of the action set.
- \`actions\`: List of actions.
- \`memberIDs\`: List of member IDs.

Here's an example:

\`\`\`json
{
  "instructions": [{
    "kind": "removePermissionGrants",
    "actions": [ "updateTeamName", "updateTeamDescription" ],
    "memberIDs": [ "1234a56b7c89d012345e678f", "507f1f77bcf86cd799439011" ]
  }]
}
\`\`\`

#### removeRoleAttribute

Removes a role attribute from the team.

##### Parameters

- \`key\`: The role attribute key to remove.

Here's an example:
\`\`\`json
{
  "instructions": [
    {
      "kind": "removeRoleAttribute",
      "key": "testAttribute"
    }
  ]
}
\`\`\`

#### replaceMembers

Replaces the existing members of the team with the new members.

##### Parameters

- \`values\`: List of member IDs of the new members.

Here's an example:

\`\`\`json
{
  "instructions": [{
    "kind": "replaceMembers",
    "values": [ "1234a56b7c89d012345e678f", "507f1f77bcf86cd799439011" ]
  }]
}
\`\`\`

#### replaceRoleAttributes

Replaces the existing role attributes for the team with new role attributes.

##### Parameters

- \`values\`: A map of role attribute keys to lists of role attribute values

Here's an example:

\`\`\`json
{
  "instructions": [{
    "kind": "replaceRoleAttributes",
    "values": {
      "testAttribute": [ "someNewValue", "someOtherNewValue" ],
      "projectRoleAttribute": [ "project1", "project2"]
    }
  }]
}
\`\`\`

#### updateDescription

Updates the description of the team.

##### Parameters

- \`value\`: The new description.

Here's an example:

\`\`\`json
{
  "instructions": [{
    "kind": "updateDescription",
    "value": "Updated team description"
  }]
}
\`\`\`

#### updateName

Updates the name of the team.

##### Parameters

- \`value\`: The new name.

Here's an example:

\`\`\`json
{
  "instructions": [{
    "kind": "updateName",
    "value": "Updated team name"
  }]
}
\`\`\`

#### updateRoleAttribute

Updates a role attribute on the team. Any existing values for the given key will be replaced with the new values. Team members will have these role attribute values scoped for all custom roles granted to them.

##### Parameters

- \`key\`: The role attribute key to update.
- \`values\`: List of role attribute values for that key.

Here's an example:
\`\`\`json
{
  "instructions": [
    {
      "kind": "updateRoleAttribute",
      "key": "testAttribute",
      "values": ["someNewValue", "someOtherNewValue"]
    }
  ]
}
\`\`\`

</details>

### Expanding the teams response
LaunchDarkly supports four fields for expanding the "Update team" response. By default, these fields are **not** included in the response.

To expand the response, append the \`expand\` query parameter and add a comma-separated list with any of the following fields:

* \`members\` includes the total count of members that belong to the team.
* \`roles\` includes a paginated list of the custom roles that you have assigned to the team.
* \`projects\` includes a paginated list of the projects that the team has any write access to.
* \`maintainers\` includes a paginated list of the maintainers that you have assigned to the team.

For example, \`expand=members,roles\` includes the \`members\` and \`roles\` fields in the response.
`,
  args,
  tool: async (client, args, ctx) => {
    const [result, apiCall] = await teamsPatchTeam(
      client,
      args.request,
      { fetchOptions: { signal: ctx.signal } },
    ).$inspect();

    if (!result.ok) {
      return {
        content: [{ type: "text", text: result.error.message }],
        isError: true,
      };
    }

    const value = result.value;

    return formatResult(value, apiCall);
  },
};
